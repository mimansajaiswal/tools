:root {
    --qa-bg: #fffaf0;
    --qa-fg: #2c2a26;
    --qa-muted: #746b62;
    --qa-border: #dfd4c5;
    --qa-accent: #4a5f75;
    --qa-accent-soft: #e8eef5;
    --qa-danger: #963c3c;
    --qa-radius: 12px;
    --qa-font: "JetBrains Mono", "IBM Plex Mono", monospace;

    --qa-input-bg: #ffffff;
    --qa-input-fg: var(--qa-fg);
    --qa-card-bg: #ffffff;
    --qa-card-fg: var(--qa-fg);
    --qa-output-bg: #ffffff;
    --qa-output-fg: var(--qa-fg);

    --qa-pill-bg: transparent;
    --qa-pill-fg: var(--qa-fg);
    --qa-pill-border: var(--qa-border);
    --qa-max-width: 100%;
}

.qa-root {
    width: 100%;
    max-width: var(--qa-max-width);
    margin-inline: auto;
    box-sizing: border-box;
    overflow-x: hidden;
    background: var(--qa-bg);
    color: var(--qa-fg);
    border: 1px solid var(--qa-border);
    border-radius: var(--qa-radius);
    font-family: var(--qa-font);
    padding: 14px;
}

.qa-root,
.qa-root *,
.qa-root *::before,
.qa-root *::after {
    box-sizing: border-box;
}

.qa-input-wrap {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.qa-input-surface {
    width: 100%;
    max-width: 100%;
    border: 1px solid var(--qa-border);
    border-radius: 10px;
    background: var(--qa-input-bg);
    min-height: 110px;
}

.qa-inline-text {
    white-space: pre-wrap;
    word-break: break-word;
    font-size: 13px;
    line-height: 1.45;
    font-family: inherit;
    color: var(--qa-input-fg);
}

.qa-inline-mark {
    border-radius: 6px;
    padding: 0 6px;
    box-decoration-break: clone;
    -webkit-box-decoration-break: clone;
    background: color-mix(in srgb, var(--qa-inline-accent, var(--qa-accent)) 18%, transparent);
    box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--qa-inline-accent, var(--qa-accent)) 55%, transparent);
    color: var(--qa-input-fg);
}

.qa-inline-mark>span {
    overflow-wrap: anywhere;
    word-break: break-word;
}

.qa-inline-mark-interactive {
    pointer-events: auto;
    cursor: pointer;
}

.qa-inline-mark-inferred {
    box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--qa-inline-accent, var(--qa-accent)) 55%, transparent), inset 0 0 0 999px color-mix(in srgb, var(--qa-inline-accent, var(--qa-accent)) 8%, transparent);
}

.qa-inline-mark-blocked {
    background:
        radial-gradient(circle at 1px 1px, color-mix(in srgb, #dc2626 30%, transparent) 1px, transparent 0) 0 0 / 7px 7px,
        color-mix(in srgb, #dc2626 10%, transparent);
    box-shadow: inset 0 0 0 1px color-mix(in srgb, #dc2626 40%, transparent);
}

.qa-inline-mark-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    margin-right: 3px;
    opacity: 0.85;
    vertical-align: baseline;
}

.qa-inline-mark-blocked-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    margin-right: 3px;
    color: #dc2626;
    font-weight: 700;
    font-size: 10px;
    line-height: 1;
}

.qa-inline-mark-dismiss {
    border: 0;
    background: transparent;
    color: inherit;
    cursor: pointer;
    padding: 0;
    margin: 0 0 0 4px;
    font: inherit;
    line-height: 1;
    opacity: 0.8;
    vertical-align: baseline;
}

.qa-inline-mark-dismiss:hover {
    opacity: 1;
}

.qa-input {
    width: 100%;
    max-width: 100%;
    min-height: 110px;
    overflow: auto;
    border: 0;
    background: transparent;
    color: var(--qa-input-fg);
    padding: 10px 12px;
    font-size: 13px;
    line-height: 1.45;
    font-family: inherit;
    white-space: pre-wrap;
    word-break: break-word;
}

.qa-input:empty::before {
    content: attr(data-placeholder);
    color: var(--qa-muted);
    pointer-events: none;
}

.qa-input:focus {
    caret-color: var(--qa-input-fg);
    outline: 2px solid var(--qa-accent-soft);
    outline-offset: -2px;
}

.qa-hint {
    font-size: 11px;
    color: var(--qa-muted);
}

.qa-status {
    font-size: 12px;
    color: var(--qa-muted);
    margin: 10px 0 8px;
}

.qa-preview {
    display: grid;
    gap: 8px;
    width: 100%;
    max-width: 100%;
}

.qa-entry {
    width: 100%;
    max-width: 100%;
    border: 1px solid var(--qa-border);
    border-radius: 10px;
    background: var(--qa-card-bg);
    color: var(--qa-card-fg);
    padding: 10px;
}

.qa-entry-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 8px;
}

.qa-entry-title {
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    color: var(--qa-muted);
}

.qa-badges {
    display: flex;
    gap: 6px;
}

.qa-badge {
    border: 1px solid var(--qa-border);
    border-radius: 999px;
    padding: 2px 7px;
    font-size: 10px;
    text-transform: uppercase;
    color: var(--qa-accent);
    background: var(--qa-accent-soft);
}

.qa-pill-row {
    display: flex;
    flex-wrap: wrap;
    align-items: flex-start;
    gap: 6px;
    min-width: 0;
}

.qa-pill {
    display: flex;
    align-items: flex-start;
    flex: 0 1 auto;
    gap: 6px;
    min-width: 0;
    max-width: 100%;
    border: 1px solid var(--qa-pill-accent, var(--qa-pill-border));
    border-radius: 999px;
    background: var(--qa-pill-bg);
    color: var(--qa-pill-accent, var(--qa-pill-fg));
    padding: 3px 8px;
    font-size: 12px;
    line-height: 1.2;
    white-space: normal;
    overflow-wrap: anywhere;
    word-break: break-word;
}

.qa-pill>span:not(.qa-pill-inferred-icon) {
    display: block;
    min-width: 0;
    overflow-wrap: anywhere;
    word-break: break-word;
}

.qa-pill-interactive {
    cursor: pointer;
    transition: transform 120ms ease, filter 120ms ease;
}

.qa-pill-interactive:hover {
    transform: translateY(-1px);
    filter: brightness(1.06);
}

.qa-pill-interactive:focus-visible {
    outline: 2px solid var(--qa-accent-soft);
    outline-offset: 1px;
}

.qa-pill-inferred {
    border-style: dashed;
}

.qa-pill-inferred-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    opacity: 0.85;
}

.qa-pill-dismiss {
    border: 0;
    background: transparent;
    color: inherit;
    cursor: pointer;
    padding: 0;
    margin: 0;
    font: inherit;
    line-height: 1;
    opacity: 0.8;
    flex-shrink: 0;
}

.qa-pill-dismiss:hover {
    opacity: 1;
}

.qa-pill-blocked {
    border-style: dashed;
    border-color: color-mix(in srgb, #dc2626 50%, var(--qa-pill-border));
    color: color-mix(in srgb, #991b1b 72%, var(--qa-pill-fg));
    background:
        radial-gradient(circle at 1px 1px, color-mix(in srgb, #dc2626 26%, transparent) 1px, transparent 0) 0 0 / 7px 7px,
        color-mix(in srgb, #dc2626 10%, transparent);
    cursor: pointer;
}

.qa-pill-blocked:hover {
    filter: brightness(1.03);
}

.qa-pill-blocked-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    color: #dc2626;
    font-weight: 700;
    font-size: 10px;
    line-height: 1;
}

.qa-issues {
    margin-top: 8px;
    border-top: 1px dashed var(--qa-border);
    padding-top: 8px;
    display: grid;
    gap: 4px;
}

.qa-issue {
    font-size: 12px;
    color: var(--qa-danger);
}

.qa-attachment-section {
    margin-top: 8px;
    display: grid;
    gap: 6px;
}

.qa-attachment-controls {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 8px;
}

.qa-attachment-pick {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border: 1px solid var(--qa-border);
    border-radius: 999px;
    background: color-mix(in srgb, var(--qa-accent-soft) 60%, transparent);
    color: var(--qa-card-fg);
    padding: 5px 10px;
    font-size: 12px;
    line-height: 1;
    cursor: pointer;
    transition: transform 120ms ease, filter 120ms ease;
}

.qa-attachment-pick:hover {
    transform: translateY(-1px);
    filter: brightness(1.02);
}

.qa-attachment-input {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

.qa-attachment-hint {
    font-size: 11px;
    color: var(--qa-muted);
}

.qa-attachment-list {
    display: grid;
    gap: 5px;
}

.qa-attachment-item {
    display: flex;
    align-items: center;
    gap: 6px;
    min-width: 0;
    border: 1px solid var(--qa-border);
    border-radius: 999px;
    padding: 3px 8px;
    background: color-mix(in srgb, var(--qa-accent-soft) 45%, transparent);
}

.qa-attachment-name {
    min-width: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.qa-attachment-meta {
    color: var(--qa-muted);
    font-size: 11px;
    white-space: nowrap;
}

.qa-attachment-remove {
    margin-left: auto;
    border: 0;
    background: transparent;
    color: inherit;
    cursor: pointer;
    font: inherit;
    line-height: 1;
    padding: 0;
    opacity: 0.8;
    flex-shrink: 0;
}

.qa-attachment-remove:hover {
    opacity: 1;
}

.qa-output {
    margin: 10px 0 0;
    width: 100%;
    max-width: 100%;
    border: 1px solid var(--qa-border);
    border-radius: 10px;
    background: var(--qa-output-bg);
    color: var(--qa-output-fg);
    padding: 10px;
    max-height: 220px;
    overflow: auto;
    white-space: pre-wrap;
    overflow-wrap: anywhere;
    font-size: 11px;
    line-height: 1.45;
}

.qa-dropdown {
    border: 1px solid var(--qa-border);
    border-radius: 10px;
    background: var(--qa-card-bg);
    box-shadow: 0 10px 24px rgba(0, 0, 0, 0.16);
    overflow: hidden;
    max-width: calc(100vw - 16px);
}

.qa-dropdown-search {
    width: 100%;
    border: 0;
    border-bottom: 1px solid var(--qa-border);
    background: var(--qa-input-bg);
    color: var(--qa-input-fg);
    padding: 9px 10px;
    font-size: 12px;
    font-family: inherit;
}

.qa-dropdown-search:focus {
    outline: 2px solid var(--qa-accent-soft);
    outline-offset: -2px;
}

.qa-dropdown-list {
    max-height: min(220px, calc(100vh - 120px));
    overflow: auto;
    display: grid;
}

.qa-dropdown-option {
    border: 0;
    border-bottom: 1px solid var(--qa-border);
    background: transparent;
    color: var(--qa-card-fg);
    padding: 8px 10px;
    text-align: left;
    font: inherit;
    font-size: 12px;
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
}

.qa-dropdown-option:last-child {
    border-bottom: 0;
}

.qa-dropdown-option:hover {
    background: var(--qa-accent-soft);
}

.qa-dropdown-color {
    width: 10px;
    height: 10px;
    border-radius: 999px;
    border: 1px solid var(--qa-border);
    background: transparent;
    flex-shrink: 0;
}

.qa-dropdown-add {
    color: var(--qa-accent);
}

.qa-dropdown-meta {
    margin-left: auto;
    font-size: 11px;
    color: var(--qa-muted);
}

.qa-blocked-info {
    display: flex;
    align-items: flex-start;
    gap: 8px;
    border: 1px solid color-mix(in srgb, #dc2626 35%, var(--qa-border));
    border-radius: 10px;
    padding: 10px 11px;
    background: color-mix(in srgb, #fff 88%, #dc2626 12%);
    color: var(--qa-card-fg);
    box-shadow: 0 10px 24px rgba(0, 0, 0, 0.16);
    max-width: calc(100vw - 16px);
    max-height: calc(100vh - 16px);
    overflow: auto;
}

.qa-blocked-info-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 16px;
    height: 16px;
    border-radius: 999px;
    background: #dc2626;
    color: #fff;
    font-size: 11px;
    line-height: 1;
    font-weight: 700;
    flex-shrink: 0;
}

.qa-blocked-info-text {
    font-size: 12px;
    line-height: 1.35;
    color: color-mix(in srgb, #111827 82%, var(--qa-card-fg));
}

.qa-blocked-info-anchored {
    position: fixed;
}

.qa-blocked-info-anchor-below-start {
    left: anchor(left);
    top: anchor(bottom);
    transform: translate(0, 8px);
}

.qa-blocked-info-anchor-below-end {
    left: anchor(right);
    top: anchor(bottom);
    transform: translate(-100%, 8px);
}

.qa-blocked-info-anchor-above-start {
    left: anchor(left);
    top: anchor(top);
    transform: translate(0, calc(-100% - 8px));
}

.qa-blocked-info-anchor-above-end {
    left: anchor(right);
    top: anchor(top);
    transform: translate(-100%, calc(-100% - 8px));
}

@media (max-width: 640px) {
    .qa-root {
        padding: 10px;
        border-radius: max(10px, calc(var(--qa-radius) - 2px));
    }

    .qa-input,
    .qa-inline-text {
        font-size: 12px;
    }

    .qa-pill {
        font-size: 11px;
        padding: 3px 7px;
    }

    .qa-dropdown-list {
        max-height: min(200px, calc(100vh - 110px));
    }
}